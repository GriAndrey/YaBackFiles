# Вступительное задание в Школу бэкенд-разработки Яндекса

Реализовано веб-приложение, позволяющее:
1. Представителям магазинов загружать информацию о своих товарах и категориях. Также можно изменять и удалять информацию о ранее загруженных товарах и категориях.
2. Покупателям, пользуясь веб-приложением, искать предложения разных магазинов, сравнивать цены и следить за их динамикой и историей.

Подробное описание задания и спецификация описаны в файлах <code>Task.md</code> и <code>openapi.yaml</code> соответственно.
Тесты расположены в файле unit_test.py.



Реализована все технические требования, описаные в <code>Task.md</code>, также проверки на неккоректность входных данных.

## Реализация:

Приложение реализовано с помощью фреймворка Flask, в качестве базы данных использована sqlite (использовалось 2 таблицы для ведения текущих товаров/категорий и ведения всех изменений товаров/категорий).

Реализованы все функции из <code>openapi.yaml</code> с проверкой входных данных.

## Функции:
"/"
Выводит страницу с "Hello World!"


"/imports", methods=['POST']
Импортирует элементы файловой системы. Элементы импортированные повторно обновляют текущие.
Изменение типа элемента с папки на файл и с файла на папку не допускается.
Порядок элементов в запросе является произвольным.
Проводится проверка валидности данных.

responses:
  "200":
    description: Вставка или обновление прошли успешно.
  "400":
    description: Невалидная схема документа или входные данные не верны.
    
"/delete/<id>", methods=['DELETE']
Удаляет элемент по идентификатору. При удалении папки удаляются все дочерние элементы. Доступ к истории обновлений удаленного элемента невозможен.
Проводится проверка валидности данных.

responses:
  "200":
    description: Удаление прошло успешно.
  "404":
    description: Элемент не найден.
    
    
"/nodes/<id>", methods=['GET']
Получение информации об элементе по идентификатору. При получении информации о папке также предоставляется информация о её дочерних элементах.
Проводится проверка валидности данных.

responses:
  "200":
    description: Информация об элементе.
  "404":
    description: Элемент не найден. 
    
    
"/updates", methods=['GET']
Получение списка **файлов**, которые были обновлены за последние 24 часа включительно [date - 24h, date] от времени переданном в запросе.
Проводится проверка валидности данных.

responses:
  "200":
    description: Список элементов, которые были обновлены.
  "400":
    description: Невалидная схема документа или входные данные не верны. 
    
    
"/node/<id>/history", methods=['GET'] 
Получение истории обновлений по элементу за заданный полуинтервал [from, to). История по удаленным элементам недоступна.
Проводится проверка валидности данных.

responses:
  "200":
    description: История по элементу.
  "400":
    description: Некорректный формат запроса или некорректные даты интервала.
  "404":
    description: Элемент не найден.     
    
    
    
## Установка:

1. Скопировать репозиторий:
<code>git clone https://github.com/GriAndrey/YaBackFiles.git</code>
2. Создание образа из файла Dockerfile:
<code>docker image build -t docker-backend .</code>
3. Запуск Докера:
<code>docker run -p 80:80 --restart=always -d docker-backend</code>
Указываем порт и возможностью автоматического перезапуска при рестарте контейнера.
4. Проверяем работоспособность:
<code>localhost:80</code>
